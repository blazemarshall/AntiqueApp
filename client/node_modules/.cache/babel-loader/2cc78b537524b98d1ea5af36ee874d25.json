{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000\";\nconst headers = new Headers();\nheaders.append(\"Content-Type\", \"application/json\");\nasync function fetchJson(url, options, onCancel) {\n  try {\n    const response = await fetch(url, options);\n    if (response.status === 204) {\n      return null;\n    }\n    const payload = await response.json();\n    if (payload.error) {\n      return Promise.reject({\n        message: payload.error\n      });\n    }\n    return payload.data;\n  } catch (error) {\n    if (error.name !== \"AbortError\") {\n      console.error(error.stack);\n      throw error;\n    }\n    return Promise.resolve(onCancel);\n  }\n}\nexport async function listAntiques(signal) {\n  const url = new URL(`${API_BASE_URL}/antiques`);\n  return await fetchJson(url, {\n    headers,\n    signal\n  }, []);\n}\nexport async function createAntique(antique, signal) {\n  const url = new URL(`${API_BASE_URL}/antiques/addantique`);\n  // const data = antique\n  const options = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(antique),\n    signal\n  };\n  return await fetchJson(url, options);\n}\nexport async function deleteAntique(antique, signal) {\n  console.log(antique);\n  const url = new URL(`${API_BASE_URL}/antiques`);\n  const options = {\n    method: 'DELETE',\n    headers,\n    body: JSON.stringify({\n      data: antique\n    }),\n    signal\n  };\n  return await fetchJson(url, options);\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_BASE_URL","headers","Headers","append","fetchJson","url","options","onCancel","response","fetch","status","payload","json","error","Promise","reject","message","data","name","console","stack","resolve","listAntiques","signal","URL","createAntique","antique","method","body","JSON","stringify","deleteAntique","log"],"sources":["C:/Users/robot/Desktop/Product/AntiqueApp/client/src/utils/api.js"],"sourcesContent":["\r\nconst API_BASE_URL =\r\nprocess.env.REACT_APP_API_BASE_URL || \"http://localhost:5000\";\r\n\r\n\r\nconst headers = new Headers();\r\nheaders.append(\"Content-Type\", \"application/json\");\r\n\r\nasync function fetchJson(url, options, onCancel) {\r\n    try {\r\n      const response = await fetch(url, options);\r\n      if (response.status === 204) {\r\n        return null;\r\n      }\r\n      const payload = await response.json();\r\n      if (payload.error) {\r\n        return Promise.reject({ message: payload.error });\r\n      }\r\n      return payload.data;\r\n    } catch (error) {\r\n      if (error.name !== \"AbortError\") {\r\n        console.error(error.stack);\r\n        throw error;\r\n      }\r\n      return Promise.resolve(onCancel);\r\n    }\r\n  }\r\n\r\n  export async function listAntiques(signal) {\r\n    const url = new URL(`${API_BASE_URL}/antiques`);\r\n    return await fetchJson(url, { headers, signal }, []);\r\n  }\r\n\r\n  export async function createAntique(antique,signal){\r\n    const url = new URL(`${API_BASE_URL}/antiques/addantique`);\r\n    // const data = antique\r\n    const options = {\r\n      method:'POST',\r\n      headers,\r\n      body:JSON.stringify(antique),\r\n      signal,\r\n    };\r\n    return await fetchJson(url,options)\r\n  }\r\n  export async function deleteAntique(antique,signal){\r\nconsole.log(antique)\r\n    const url= new URL(`${API_BASE_URL}/antiques`);\r\n    const options = {\r\n      method:'DELETE',\r\n      headers,\r\n      body:JSON.stringify({data:antique}),\r\n      signal,\r\n    }\r\n    return await fetchJson(url,options)\r\n  }"],"mappings":"AACA,MAAMA,YAAY,GAClBC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB;AAG7D,MAAMC,OAAO,GAAG,IAAIC,OAAO,EAAE;AAC7BD,OAAO,CAACE,MAAM,CAAC,cAAc,EAAE,kBAAkB,CAAC;AAElD,eAAeC,SAAS,CAACC,GAAG,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EAC7C,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,GAAG,EAAEC,OAAO,CAAC;IAC1C,IAAIE,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3B,OAAO,IAAI;IACb;IACA,MAAMC,OAAO,GAAG,MAAMH,QAAQ,CAACI,IAAI,EAAE;IACrC,IAAID,OAAO,CAACE,KAAK,EAAE;MACjB,OAAOC,OAAO,CAACC,MAAM,CAAC;QAAEC,OAAO,EAAEL,OAAO,CAACE;MAAM,CAAC,CAAC;IACnD;IACA,OAAOF,OAAO,CAACM,IAAI;EACrB,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACd,IAAIA,KAAK,CAACK,IAAI,KAAK,YAAY,EAAE;MAC/BC,OAAO,CAACN,KAAK,CAACA,KAAK,CAACO,KAAK,CAAC;MAC1B,MAAMP,KAAK;IACb;IACA,OAAOC,OAAO,CAACO,OAAO,CAACd,QAAQ,CAAC;EAClC;AACF;AAEA,OAAO,eAAee,YAAY,CAACC,MAAM,EAAE;EACzC,MAAMlB,GAAG,GAAG,IAAImB,GAAG,CAAE,GAAE3B,YAAa,WAAU,CAAC;EAC/C,OAAO,MAAMO,SAAS,CAACC,GAAG,EAAE;IAAEJ,OAAO;IAAEsB;EAAO,CAAC,EAAE,EAAE,CAAC;AACtD;AAEA,OAAO,eAAeE,aAAa,CAACC,OAAO,EAACH,MAAM,EAAC;EACjD,MAAMlB,GAAG,GAAG,IAAImB,GAAG,CAAE,GAAE3B,YAAa,sBAAqB,CAAC;EAC1D;EACA,MAAMS,OAAO,GAAG;IACdqB,MAAM,EAAC,MAAM;IACb1B,OAAO;IACP2B,IAAI,EAACC,IAAI,CAACC,SAAS,CAACJ,OAAO,CAAC;IAC5BH;EACF,CAAC;EACD,OAAO,MAAMnB,SAAS,CAACC,GAAG,EAACC,OAAO,CAAC;AACrC;AACA,OAAO,eAAeyB,aAAa,CAACL,OAAO,EAACH,MAAM,EAAC;EACrDJ,OAAO,CAACa,GAAG,CAACN,OAAO,CAAC;EAChB,MAAMrB,GAAG,GAAE,IAAImB,GAAG,CAAE,GAAE3B,YAAa,WAAU,CAAC;EAC9C,MAAMS,OAAO,GAAG;IACdqB,MAAM,EAAC,QAAQ;IACf1B,OAAO;IACP2B,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;MAACb,IAAI,EAACS;IAAO,CAAC,CAAC;IACnCH;EACF,CAAC;EACD,OAAO,MAAMnB,SAAS,CAACC,GAAG,EAACC,OAAO,CAAC;AACrC"},"metadata":{},"sourceType":"module"}